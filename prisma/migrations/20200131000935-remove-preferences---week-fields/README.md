# Migration `20200131000935-remove-preferences---week-fields`

This migration has been generated by William Sedlacek at 1/31/2020, 12:09:35 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."Child_preferences"

ALTER TABLE "public"."Child" DROP COLUMN "preferences",
ADD COLUMN "dyslexia" boolean  NOT NULL DEFAULT false;

ALTER TABLE "public"."Progress" ADD COLUMN "week" integer  NOT NULL DEFAULT 0;

DROP TABLE "public"."Preferences";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200130225148-nestjs-refactor..20200131000935-remove-preferences---week-fields
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 enum AdminRole {
   ADMIN
@@ -47,23 +47,18 @@
   id             Int           @id  @default(autoincrement())
   subscription   Boolean            @default(false)
   username       String
   grade          Int
-  preferences    Preferences
+  dyslexia       Boolean            @default(false)
   cohort         Cohort
   parent         Parent
   submissions    Submission[]
   progress       Progress[]
 }
-model  Preferences {
-  id        Int      @id  @default(autoincrement())
-  child     Child
-  dyslexia  Boolean       @default(false)
-}
-
 model Progress {
   id          Int      @id  @default(autoincrement())
+  week        Int
   reading     Boolean       @default(false)
   submission  Boolean       @default(false)
 }
```


